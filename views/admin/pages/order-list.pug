extends ../layouts/default.pug 
include ../mixins/pagination.pug

block main 
  h2.box-title Quản lý đơn hàng

  //- Section 4
  .section-4 
    .inner-item.inner-label 
      <i class="fa-solid fa-filter"></i> Bộ lọc
    .inner-item 
      select(filter-status) 
        option(value="") Trạng thái 
        option(value="initial") Khởi tạo 
        option(value="done") Hoàn thành
        option(value="cancel") Đã hủy
    .inner-item
      input(type="date" filter-start-date)
      span -
      input(type="date" filter-end-date)
    .inner-item 
      select(filter-payment-method) 
        option(value="") Phương thức thanh toán
        each item in paymentMethodList
          option(value=item.value) #{item.label}
    .inner-item 
      select(filter-payment-status) 
        option(value="") Trạng thái thanh toán
        each item in paymentStatusList
          option(value=item.value) #{item.label}
    .inner-item.inner-reset(filter-reset)
      <i class="fa-solid fa-rotate-left"></i> Xóa bộ lọc
  //- End Section 4

  //- Section 5
  .section-5
    .inner-search 
      <i class="fa-solid fa-magnifying-glass"></i>
      input(type="text" placeholder="Tìm kiếm" search)
  //- End Section 5

  //- Section 6
  .section-6 
    .table-2 
      table 
        thead 
          tr 
            th Mã
            th Thông tin khách
            th Danh sách tour
            th Thanh toán
            th Trạng thái
            th.inner-center Ngày đặt
            th Hành động
        tbody 
          each orderDetail in orderList
            tr 
              td 
                .inner-code #{orderDetail.code}
              td 
                div Họ tên: #{orderDetail.fullName}
                div SĐT: #{orderDetail.phone}
                div Ghi chú: #{orderDetail.note || "Không có"}
              td
                .inner-list 
                  each item in orderDetail.items
                    .inner-item 
                      .inner-image 
                        img(src=item.avatar)
                      .inner-content 
                        .inner-name #{item.name}
                        .inner-quantity 
                            div Người lớn: #{item.quantityAdult} x #{item.priceNewAdult.toLocaleString("vi-VN")}đ
                            div Trẻ em: #{item.quantityChildren} x #{item.priceNewChildren.toLocaleString("vi-VN")}đ
                            div Em bé: #{item.quantityBaby} x #{item.priceNewBaby.toLocaleString("vi-VN")}đ
              td 
                div Tạm tính: #{orderDetail.subTotal.toLocaleString("vi-VN")}đ
                div Giảm: #{orderDetail.discount.toLocaleString("vi-VN")}đ
                //- div Mã giảm: TOURMUAHE2025
                div Thanh toán: #{orderDetail.total.toLocaleString("vi-VN")}đ
                div PTTT: #{orderDetail.paymentMethodName}
                div TTTT: #{orderDetail.paymentStatusName}
              td 
                div(class=`badge badge-${orderDetail.statusInfo.color}`) #{orderDetail.statusInfo.label}
              td.inner-center
                div #{orderDetail.createdAtTime}
                div #{orderDetail.createdAtDate}
              td
                .inner-buttons
                  a(
                    href=`/${pathAdmin}/order/edit/${orderDetail.id}` 
                    class="inner-edit"
                  ) <i class="fa-solid fa-pen-to-square"></i> 
                  //- button(href="#" class="inner-remove") <i class="fa-solid fa-trash-can"></i>
  //- End Section 6

  //- Pagination
  +pagination(pagination.skip, orderList.length, pagination.totalRecord, pagination.totalPage)
  //- End Pagination